var e=Object.defineProperty,t=(t,l,a)=>(((t,l,a)=>{l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a})(t,"symbol"!=typeof l?l+"":l,a),a);import{Q as l,E as a,a as o,e as s,b as i}from"./e404.f67fe263.js";import{c as r,V as n,m as d,a as u,r as m,_ as c,b as h,F as p,d as f,M as g,P as b,Q as y,h as x,i as v,u as w,w as k,e as Y,J as V,R as N,D as C,f as D,x as $,g as M,j as I,k as U}from"./vendor.aebc7018.js";import{S as T,B as j,k as E,t as O,L as S,l as A,D as R,j as q,i as z,f as L,O as F,g as G,d as B,h as P,b as W,c as J,r as Q,P as Z,I as _,e as H,v as X,w as K,p as ee,M as te}from"./ImageView.81d8d153.js";import"https://cdn.jsdelivr.net/npm/xlsx@0.17.4/dist/xlsx.full.min.js";class le extends n{constructor(){super(...arguments),t(this,"user",null)}}function ae(e){return r(((t,l)=>{t.computed||(t.computed=Object.create(null)),t.computed[l||l]={get(){return this.$root[e||l]},set(t){this.$root[e||l]=t}}}))}class oe extends(d(le)){constructor(){super(...arguments),t(this,"name","App"),t(this,"isShow",!1)}render(){return u(m("el-config-provider"),{locale:c},{default:()=>[u(m("el-skeleton"),{loading:0==this.isShow},{default:()=>u(m("router-view"),null,null)})]})}created(){T.getTicket().then((e=>{this.$axios.get("/session",{params:{ticket:e}}).then((e=>{this.user=e,this.isShow=!0})).catch((e=>{this.$alert(e.message||"请求出错，即将刷新","错误",{callback:()=>{location.reload()}})}))})).catch(((e,t)=>{if(502==t.status)return this.isShow=!0,void this.$router.push({name:"e502",params:{is502:"true"}});this.$alert(e.message||"请求出错，即将刷新","错误",{callback:()=>{location.reload()}})})).login((e=>{T.toLogin()}))}}var se="_list_fag7m_1",ie="_img_fag7m_10",re="_disabled_fag7m_17";class ne extends n{constructor(){super(...arguments),t(this,"user"),t(this,"businessArr",[{title:"关务辅助",name:"ceb",img:"./assets/ceb.fad207c2.svg"},{title:"税务辅助",name:"tax",img:"./assets/tax.691f3d4b.svg"},{title:"外汇管理",name:"safe",img:"./assets/safe.9263689c.svg"},{title:"行政区",name:"region",img:"./assets/region.b4e86fbd.svg"},{title:"报关单",name:"declaration",img:"./assets/clearance.36d06f13.svg"},{title:"市场局",name:"market",img:"./assets/market.00546812.svg"}]),t(this,"sixArr",[{title:"电商信用体系",name:"setup-shop",img:"./assets/credit.f3bfe465.svg"},{title:"风险防控体系",name:"setup-risk",img:"./assets/control.635be76e.svg"},{title:"金融服务体系",name:"setup-finance",img:"./assets/finance.7cf18bc1.svg"},{title:"智能物流体系",name:"setup-logistics",img:"./assets/logistics.89b92590.svg"},{title:"统计监测体系",name:"setup-statistics",img:"./assets/statistics.68b4f69b.svg"},{title:"信息共享体系",name:"setup-share",img:"./assets/share.7e12e4fa.svg"}])}render(){return u(p,null,[u("div",{class:"font-size-7 font-weight-bold my-10 text-center"},[f("选择业务")]),u("div",{class:"d-flex justify-center"},[u("div",{class:"d-flex flex-wrap justify-center"},[this.businessArr.map((e=>{var t,l;return u(m("router-link"),{to:e.name,class:(null==(t=this.user.type)?void 0:t.indexOf("ADMIN"))>-1||(null==(l=this.user.type)?void 0:l.indexOf(e.name.toUpperCase()))>-1?null:re},{default:()=>[u("div",{class:["ma-8 rounded-lg",se]},[u("div",{class:[ie,"text-center"]},[u("img",{src:e.img,alt:""},null)]),u("div",{class:"text-center font-size-4 font-weight-bold mt-1 grey--text text--darken-4"},[e.title])])]})}))])]),u("div",{class:"font-size-7 font-weight-bold my-10 text-center"},[f("跨境六体系")]),u("div",{class:"d-flex justify-center"},[u("div",{class:"d-flex flex-wrap justify-center"},[this.sixArr.map((e=>u(m("router-link"),{to:e.name,class:re},{default:()=>[u("div",{class:["ma-8 rounded-lg",se]},[u("div",{class:[ie,"text-center"]},[u("img",{src:e.img,alt:""},null)]),u("div",{class:"text-center font-size-4 font-weight-bold mt-1 grey--text text--darken-4"},[e.title])])]})))])])])}}h([ae()],ne.prototype,"user",void 0);class de extends n{constructor(){super(...arguments),t(this,"value"),t(this,"placeholder"),t(this,"val"),t(this,"clearable"),t(this,"diaso",!1),t(this,"dialist",null),t(this,"sonumber",0)}render(){return u(m("el-select"),{style:"width:100%",modelValue:this.value,"onUpdate:modelValue":e=>this.value=e,filterable:!0,remote:!0,placeholder:this.placeholder,"remote-method":e=>{this.sonumber=e.length,e&&e.length>1&&this.getProvider(e)},loading:this.diaso,"no-data-text":this.sonumber<2?"1个以上字符可搜索":"无数据",clearable:this.clearable},{default:()=>{var e;return[null==(e=this.dialist)?void 0:e.map(((e,t)=>u(m("el-option"),{key:e[this.val],label:e.name+"("+e.code+")",value:e[this.val]},null)))]}})}created(){this.value&&this.getProvider(null,this.value)}getProvider(e,t){let l={};"id"==this.val?l.providerId=t:l[this.val]=t,this.diaso=!0,this.$axios.get("/provider",{params:y.data({name:e},l)}).then((e=>{this.dialist=e.list})).finally((()=>this.diaso=!1))}}function ue(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}h([g("modelValue",{type:String})],de.prototype,"value",void 0),h([b({type:String,default:"申报企业名称"})],de.prototype,"placeholder",void 0),h([b({type:String,default:"id"})],de.prototype,"val",void 0),h([b({type:Boolean,default:!1})],de.prototype,"clearable",void 0);function me(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}function ce(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}class he extends n{constructor(){super(...arguments),t(this,"origin"),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"totalObj",{}),t(this,"disabledDate",(e=>x(e).isAfter(x(x().format("YYYY")+"-12-31"))))}render(){var e;let t,a;return u(p,null,[u("div",{class:"white px-5 py-4 mb-2"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"year","value-format":"YYYY",placeholder:"选择年"},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"进出口类型",modelValue:this.soform.ieFlag,"onUpdate:modelValue":e=>this.soform.ieFlag=e,clearable:!0},ce(t=Object.keys(j).map((e=>u(m("el-option"),{key:e,label:j[e],value:e},null))))?t:{default:()=>[t]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"起运国/运抵国",filterable:!0,modelValue:this.soform.country,"onUpdate:modelValue":e=>this.soform.country=e,clearable:!0},ce(a=w.map((e=>u(m("el-option"),{key:e.code,label:e.name+"("+e.code+")",value:e.code},{default:()=>[u("div",{class:"d-flex justify-space-between"},[u("span",null,[e.name]),u("span",{class:"grey--text"},[e.code])])]}))))?a:{default:()=>[a]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"贸易方式",modelValue:this.soform.tradeMode,"onUpdate:modelValue":e=>this.soform.tradeMode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"申报地海关代码",modelValue:this.soform.customsCode,"onUpdate:modelValue":e=>this.soform.customsCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"电商企业代码",modelValue:this.soform.ebcCode,"onUpdate:modelValue":e=>this.soform.ebcCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"数据申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u(m("el-skeleton"),{loading:this.loading||null==this.tableData},{template:()=>k(u("div",{class:"white px-4 py-10 d-flex align-center justify-center"},null),[[Y("loading"),!0]]),default:()=>Object.keys(this.tableData).map((e=>{var t,l,a;return u("div",{class:"white mt-2 px-4 py-8"},[u("div",{class:"mb-4 font-size-7 font-weight-bold"},[e,f("年")]),u(m("el-table"),{data:this.tableData[e],style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"dname"},null),u(m("el-table-column"),{prop:"d1",label:"1月"},null),u(m("el-table-column"),{prop:"d2",label:"2月"},null),u(m("el-table-column"),{prop:"d3",label:"3月"},null),u(m("el-table-column"),{prop:"d4",label:"4月"},null),u(m("el-table-column"),{prop:"d5",label:"5月"},null),u(m("el-table-column"),{prop:"d6",label:"6月"},null),u(m("el-table-column"),{prop:"d7",label:"7月"},null),u(m("el-table-column"),{prop:"d8",label:"8月"},null),u(m("el-table-column"),{prop:"d9",label:"9月"},null),u(m("el-table-column"),{prop:"d10",label:"10月"},null),u(m("el-table-column"),{prop:"d11",label:"11月"},null),u(m("el-table-column"),{prop:"d12",label:"12月"},null)]}),u("div",{class:"mt-4"},[u("div",{class:"mb-2"},[f("总数量："),null==(t=this.totalObj[e])?void 0:t.num]),u("div",null,[f("总金额："),null==(a=null==(l=this.totalObj[e])?void 0:l.total)?void 0:a.toFixed(4),f(" 万元")])])])}))}),0==this.loading&&null!=this.tableData&&0==(null==(e=Object.keys(this.tableData))?void 0:e.length)?u(m("el-empty"),{image:O,"image-size":650},{description:()=>u("h3",null,[f("暂无数据")])}):null])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0;let e=this.$route.query.date?this.$route.query.date+"-01-01":x().format("YYYY")+"-01-01",t=x(e).endOf("year").format("YYYY-MM-DD");this.soform.date=x(e).format("YYYY");let a="/count/invt";"region"==this.origin&&(a="/region/invt"),this.$axios.get(a,{params:l.data(this.$route.query,{date:e+","+t})}).then((t=>{let l={},a={dname:"数量",d1:"0",d2:"0",d3:"0",d4:"0",d5:"0",d6:"0",d7:"0",d8:"0",d9:"0",d10:"0",d11:"0",d12:"0"},o={dname:"金额(万元)",d1:"0",d2:"0",d3:"0",d4:"0",d5:"0",d6:"0",d7:"0",d8:"0",d9:"0",d10:"0",d11:"0",d12:"0"},s={};t.map((e=>{var t;let i=e.id.split("-")[0];l[i]||(l[i]=[V.depthClone(a),V.depthClone(o)],s[i]={total:0,num:0});let r=Number(e.id.split("-")[1]);l[i][0]["d"+r]=e.total,l[i][1]["d"+r]=null==(t=e.price)?void 0:t.toFixed(4),s[i].total+=Number(e.price),s[i].num+=Number(e.total)})),0==t.length&&(l[x(e).format("YYYY")]=[V.depthClone(a),V.depthClone(o)],s[x(e).format("YYYY")]={total:0,num:0}),this.totalObj=s,this.tableData=l,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null})).finally((()=>this.loading=!1))}}h([b({type:String,default:"ceb"})],he.prototype,"origin",void 0);class pe extends n{constructor(){super(...arguments),t(this,"info")}render(){return u(m("el-skeleton"),{loading:null==this.info,animated:!0},{default:()=>u(p,null,[u("div",{class:"d-flex align-end"},[u("span",null,[" ",f("创建时间："),u(m("el-time"),{value:this.info.createTime,type:"datetime"},null)])]),u("div",{class:"mt-3 rounded-lg overflow-hidden decbox"},[u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("唯一编码：")]),this.info.itemNo]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("商品编码：")]),this.info.hsCode]})]}),u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("电商平台/电商企业编码：")]),this.info.ebcCode]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("电商平台/电商企业：")]),this.info.ebcName]})]}),u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("条形码：")]),this.info.code||"--"]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("原产国：")]),E[this.info.country]]})]}),u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("法定数量：")]),this.info.qty1||"--"]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("第二数量：")]),this.info.qty2||"--"]})]}),u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("计量单位：")]),this.info.unit?u("span",null,[A[this.info.unit],u("span",{class:"font-size-0 grey--text ml-1"},[f("("),this.info.unit,f(")")])]):"--"]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("法定计量单位：")]),this.info.unit1?u("span",null,[A[this.info.unit1],u("span",{class:"font-size-0 grey--text ml-1"},[f("("),this.info.unit1,f(")")])]):"--"]})]}),u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("第二计量单位：")]),this.info.unit2?u("span",null,[A[this.info.unit2],u("span",{class:"font-size-0 grey--text ml-1"},[f("("),this.info.unit2,f(")")])]):"--"]})]})])])})}}h([b({type:Object})],pe.prototype,"info",void 0);function fe(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}class ge extends n{constructor(){super(...arguments),t(this,"type"),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"diashow",!1),t(this,"diaform",{}),t(this,"fromRef"),t(this,"fromErr",{}),t(this,"formloading",!1),t(this,"disabledDate",(e=>x(e).isAfter(x(x().subtract(1,"months").format("YYYY-MM")+"-01"))))}render(){var e;let t,o;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"month","value-format":"YYYY-MM",placeholder:"选择月"},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),k(u(m("el-form-item"),{class:"mr-2"},{default:()=>[u(m("el-select"),{placeholder:"类型",modelValue:this.soform.ieFlag,"onUpdate:modelValue":e=>this.soform.ieFlag=e,clearable:!0},fe(t=Object.keys(j).map((e=>u(m("el-option"),{value:e,key:e,label:j[e]},{default:()=>[j[e]]}))))?t:{default:()=>[t]})]}),[[C,"tax"!=this.type]]),u(m("el-form-item"),null,{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]}),u(m("el-button"),{round:!0,type:"warning",onClick:()=>{this.diashow=!0,"tax"==this.type&&(this.diaform.ieFlag="E")}},{default:()=>[f("生成表格")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"provider.code",label:"申报企业代码"},null),u(m("el-table-column"),{prop:"provider.name",label:"申报企业"},null),u(m("el-table-column"),{prop:"ieFlag",label:"类型"},{default:({row:e})=>u("span",null,[j[e.ieFlag]||"--"])}),u(m("el-table-column"),{prop:"count",label:"清单数量"},null),u(m("el-table-column"),{prop:"goodsCount",label:"商品数量"},null),u(m("el-table-column"),{prop:"price",label:"成交金额"},null),u(m("el-table-column"),{label:"表格月份"},{default:({row:e})=>u(m("el-time"),{value:e.edate,type:"format",format:"YYYY-MM"},null)}),u(m("el-table-column"),{label:"生成时间"},{default:({row:e})=>u(m("el-time"),{value:e.createTime,type:"datetime"},null)}),u(m("el-table-column"),{label:"操作","min-width":"120px"},{default:({row:e})=>{var t,l;let a=null;if("SUCCESS"==e[this.type].state)if(1==(null==(t=e[this.type].path)?void 0:t.length))a=u(m("el-popover"),{placement:"bottom-end",trigger:"click",width:240},{reference:()=>u("div",null,[u(m("el-button"),{style:"width:100px",round:!0,size:"small",type:"success",plain:!0},{default:()=>[f("下载")]})]),default:()=>u("div",{class:"text-center"},[u("a",{href:"https://view.officeapps.live.com/op/view.aspx?src="+("//cdn.lygddt.com/"+e[this.type].path[0]),class:"el-button el-button--success el-button--small is-plain is-round",style:"width:100px",target:"_blank"},[f("预览")]),u("a",{href:"//cdn.lygddt.com/"+e[this.type].path[0],class:"el-button el-button--success el-button--small is-plain is-round",style:"width:100px",target:"_blank"},[f("下载")])])});else{let t=[];null==(l=e[this.type].path)||l.map(((e,l)=>{t.push(u(m("el-popover"),{placement:"bottom-end",trigger:"click",width:240},{reference:()=>u("div",{class:{"mt-2":0!=l}},[u(m("el-button"),{style:"width:100px",round:!0,size:"small",type:"success",plain:!0},{default:()=>[f("下载第"),l+1,f("页")]})]),default:()=>u("div",{class:"text-center"},[u("a",{href:"https://view.officeapps.live.com/op/view.aspx?src="+("//cdn.lygddt.com/"+e),class:"el-button el-button--success el-button--small is-plain is-round",style:"width:100px",target:"_blank"},[f("预览第"),l+1,f("页")]),u("a",{href:"//cdn.lygddt.com/"+e,class:"el-button el-button--success el-button--small is-plain is-round",style:"width:100px",target:"_blank"},[f("下载第"),l+1,f("页")])])}))})),a=t}else a=u(m("el-button"),{type:"success",plain:!0,round:!0,disabled:!0,size:"small",style:"width:100px"},{default:()=>[f("生成中...")]});return a}})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})]),u(m("el-dialog"),{title:"生成表格",modelValue:this.diashow,"onUpdate:modelValue":e=>this.diashow=e,width:"600px"},{default:()=>[u("div",null,[u(m("el-form"),{model:this.diaform,ref:"fromRef"},{default:()=>[u(m("el-form-item"),{prop:"date",error:this.fromErr.date,rules:[a.notBlank("请选择月份")]},{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,style:"width:100%",modelValue:this.diaform.date,"onUpdate:modelValue":e=>this.diaform.date=e,type:"month","value-format":"YYYY-MM-DD",placeholder:"选择月份"},null)]}),u(m("el-form-item"),{prop:"ieFlag",error:this.fromErr.ieFlag,rules:[a.notBlank("请选择类型","change")]},{default:()=>[u(m("el-select"),{placeholder:"类型",modelValue:this.diaform.ieFlag,"onUpdate:modelValue":e=>this.diaform.ieFlag=e,style:"width:100%",disabled:"tax"==this.type},fe(o=Object.keys(j).map((e=>u(m("el-option"),{value:e,key:e,label:j[e]},{default:()=>[j[e]]}))))?o:{default:()=>[o]})]}),u(m("el-form-item"),{prop:"providerId",error:this.fromErr.providerId,rules:[a.notBlank("申报企业名称","change")]},{default:()=>[u(de,{modelValue:this.diaform.providerId,"onUpdate:modelValue":e=>this.diaform.providerId=e,placeholder:"申报企业名称"},null)]})]}),u("div",{class:"d-flex justify-center"},[u(m("el-button"),{type:"primary",class:"mr-4",style:"width:120px",loading:this.formloading,onClick:()=>{this.fromErr={},this.fromRef.validate((e=>{if(e){if(!this.diaform.providerId||""==this.diaform.providerId)return this.$message.error("未选择申报企业,请搜索的企业名称并选择企业");this.formloading=!0,this.$axios.post("/ceb/excel",this.diaform).then((e=>{this.$message.success("已提交生成请求,可在列表操作下载"),this.diashow=!1,setTimeout((()=>{this.fromRef.resetFields(),this.getList()}))})).catch((e=>{this.$message.error(e.message||"提交失败"),e.data&&(this.fromErr=e.data)})).finally((()=>this.formloading=!1))}}))}},{default:()=>[f("生成表格")]}),u(m("el-button"),{style:"width:120px",onClick:()=>this.diashow=!1},{default:()=>[f("取消")]})])])]})])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){var e;this.loading=!0;let t=this.$route.query.date?this.$route.query.date+"-01":null,a=x(t).endOf("month").format("YYYY-MM-DD");this.$axios.get("/ceb/excel",{params:l.data(this.$route.query,{date:(null==(e=this.$route.query)?void 0:e.date)?t+","+a:null},"tax"==this.type?{ieFlag:"E"}:null)}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}h([b({type:String,default:"ceb"})],ge.prototype,"type",void 0),h([N("fromRef")],ge.prototype,"fromRef",void 0);const be={path:"ceb",name:"ceb",meta:{name:"关务辅助"},component:H,redirect:{name:"ceb-goods"},children:[{path:"provider",name:"ceb-provider",meta:{name:"企业备案",nochild:!0,icon:"iconqiye",value:"CEB_PROVIDER"},component:H,redirect:{name:"ceb-provider-list"},children:[{path:"",name:"ceb-provider-list",meta:{name:"企业"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"tableData",null),t(this,"loading",!1),t(this,"page",null),t(this,"btnloading",!1)}render(){var e;let t;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"企业名称",modelValue:this.soform.name,"onUpdate:modelValue":e=>this.soform.name=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"企业代码",modelValue:this.soform.code,"onUpdate:modelValue":e=>this.soform.code=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>{return[u(m("el-select"),{placeholder:"状态",modelValue:this.soform.state,"onUpdate:modelValue":e=>this.soform.state=e,clearable:!0},(e=t=Object.keys(z).map((e=>u(m("el-option"),{label:z[e],key:e,value:e},null))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)?t:{default:()=>[t]}))];var e}}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout(this.getList)}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"}},{default:()=>[u(m("el-table-column"),{prop:"name",label:"企业名称"},{default:({row:e})=>u(m("router-link"),{to:{name:"ceb-provider-info",query:{id:e.id}}},{default:()=>[e.name]})}),u(m("el-table-column"),{prop:"code",label:"海关编码"},null),u(m("el-table-column"),{prop:"dxpId",label:"dxpId"},{default:({row:e})=>u(p,null,[e.dxpId||"--"])}),u(m("el-table-column"),{label:"区域"},{default:({row:e})=>u(p,null,[f(" "),D.exports.CodeToText[e.region[0]]+D.exports.CodeToText[e.region[1]]+(D.exports.CodeToText[e.region[2]]||"")])}),u(m("el-table-column"),{prop:"state",label:"状态"},{default:({row:e})=>u(m("el-tag"),{effect:"dark",class:"rounded-pill",style:{borderColor:q[e.state||"NONE"]},color:q[e.state||"NONE"]},{default:()=>[u("div",{class:"d-flex align-center"},[u("div",{class:"rounded-circle statecricle mr-1"},null),z[e.state]||"--"])]})}),u(m("el-table-column"),{label:"操作",width:"150px"},{default:({row:e})=>[u(m("el-button"),{style:"width:100px",class:"ma-1",disabled:this.btnloading,round:!0,size:"small",type:"success",plain:!0,onClick:()=>this.examine(e,"SUCCESS")},{default:()=>[f("通过")]}),u(m("el-button"),{style:"width:100px",class:"ma-1",disabled:this.btnloading,round:!0,size:"small",type:"danger",plain:!0,onClick:()=>this.examine(e,"ERROR")},{default:()=>[f("拒绝")]})]})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0,this.$axios.get("/provider",{params:l.data(this.$route.query)}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}examine(e,t){let l=(t,l)=>{this.btnloading=!0,this.$axios.put("/provider/state",{id:e.id,state:t,message:l}).then((e=>{this.$message.success("更改成功"),this.getList()})).catch((e=>this.$message.error(e.message||"审核失败"))).finally((()=>this.btnloading=!1))};"ERROR"==t?this.$prompt("请输入拒绝理由","提示",{inputPattern:new RegExp("\\S"),inputErrorMessage:"请输入拒绝理由"}).then((({value:e})=>{l(t,e)})).catch((()=>{})):this.$confirm(`确定要更改${e.name}的状态为 ${z[t]} 吗？`,"审核提示",{callback:e=>{"confirm"==e&&l(t)}})}}},{path:"info",name:"ceb-provider-info",meta:{name:"企业详情"},component:class extends n{constructor(){super(...arguments),t(this,"info",null),t(this,"typestate",{SUCCESS:"success",ERROR:"error",NONE:"info",CONDUCT:"warning"})}render(){return u(m("el-skeleton"),{loading:null==this.info,animated:!0},{default:()=>[u(p,null,[u("div",{class:"white px-6 py-4 align-center"},[u(m("el-breadcrumb"),{"separator-class":"el-icon-arrow-right"},{default:()=>[u(m("el-breadcrumb-item"),{to:{name:"ceb-provider-list"}},{default:()=>[u("span",{class:"grey--text font-weight-medium"},[f("企业管理")])]}),u(m("el-breadcrumb-item"),null,{default:()=>[u("span",{class:"black--text"},[this.info.name])]})]})]),u("div",{class:"mt-2 white pa-6"},[u(m("el-alert"),{title:z[this.info.state],type:this.typestate[this.info.state],"show-icon":!0,closable:!1,description:"ERROR"==this.info.state?this.info.message:null},null),u("div",{class:"d-flex align-start mt-5"},[u(m("el-logo"),{src:this.info.logo,width:"95px",height:"95px",class:"mr-7"},null),u("div",{class:"flex-grow-1"},[u("div",{class:"d-flex align-end"},[u("span",{class:"font-size-3 font-weight-bold"},[this.info.name]),u(m("el-time"),{class:"ml-4",value:this.info.createTime,type:"datetime"},null)]),u("div",{class:"mt-3 rounded-lg overflow-hidden decbox"},[u(m("el-row"),{class:"dec d-flex align-center"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("海关备案代码：")]),this.info.code]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("DxpId：")]),this.info.dxpId||"--"]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("区域ID：")]),D.exports.CodeToText[this.info.region[0]]+" / "+D.exports.CodeToText[this.info.region[1]]+" / "+D.exports.CodeToText[this.info.region[2]]]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("管理员：")]),this.info.user.phone]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("企业官网：")]),u("a",{href:this.info.url,target:"_blank"},[this.info.url])]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("法人：")]),this.info.company.legal.name]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("联系人：")]),this.info.company.linkMan.name]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("联系电话：")]),this.info.company.linkMan.phone]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("统一社会信用代码：")]),this.info.company.organization.code]}),u(m("el-col"),{span:12},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("经营主体备案企业类型：")]),this.info.type.map(((e,t)=>(0==t?"":"，")+Z[e]))]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:24},{default:()=>[u("span",{class:"grey--text text--darken-1"},[f("经营范围：")]),this.info.company.scope]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:24},{default:()=>{var e;return[u("span",{class:"grey--text text--darken-1"},[f("企业地址：")]),null==(e=this.info.company.organization.address.codeName)?void 0:e.join(),this.info.company.organization.address.address]}})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("企业商标：")]),u(_,{href:_.url(this.info.logo,null,null,"//cdn.lygddt.com/".toString()),src:this.info.logo,width:"240px",height:"160px"},null)]}),u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("营业执照：")]),u(_,{href:_.url(this.info.company.organization.img,null,null,"//cdn.lygddt.com/".toString()),src:this.info.company.organization.img,width:"240px",height:"160px"},null)]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("报关注册登记：")]),u(_,{href:_.url(this.info.company.cusImg,null,null,"//cdn.lygddt.com/".toString()),src:this.info.company.cusImg,width:"240px",height:"160px"},null)]}),u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("质量诚信经营承诺书：")]),u(_,{href:_.url(this.info.company.qualityImg,null,null,"//cdn.lygddt.com/".toString()),src:this.info.company.qualityImg,width:"240px",height:"160px"},null)]})]}),u(m("el-row"),{class:"d-flex align-center dec"},{default:()=>[u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("法人身份证：")]),u(_,{href:_.url(this.info.company.legal.frontImg,null,null,"//cdn.lygddt.com/".toString()),src:this.info.company.legal.frontImg,width:"240px",height:"160px"},null)]}),u(m("el-col"),{span:12,class:"d-flex align-start"},{default:()=>[u("div",{class:"grey--text text--darken-1",style:"width:145px"},[f("法人身份证国徽面：")]),u(_,{href:_.url(this.info.company.legal.backImg,null,null,"//cdn.lygddt.com/".toString()),src:this.info.company.legal.backImg,width:"240px",height:"160px"},null)]})]})])])])])])]})}created(){this.$route.query.id||(this.$message.error("没有找到企业信息"),this.$router.back()),this.getInfo()}getInfo(){this.$axios.get("/provider/"+this.$route.query.id).then((e=>{this.info=e})).catch((e=>{this.$message.error(e.massage||"获取不到企业信息"),this.$router.back()}))}}}]},{path:"goods",name:"ceb-goods",meta:{name:"商品备案",nochild:!0,icon:"icondianshangdingdane_commerce",value:"CEB_GOODS"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"btnloading",!1),t(this,"rowsid",[]),t(this,"infoshow",!1),t(this,"info",null)}render(){var e,t;let a;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"商品编号",modelValue:this.soform.itemNo,"onUpdate:modelValue":e=>this.soform.itemNo=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"商品名称",modelValue:this.soform.name,"onUpdate:modelValue":e=>this.soform.name=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>{return[u(m("el-select"),{placeholder:"进出口类型",modelValue:this.soform.type,"onUpdate:modelValue":e=>this.soform.type=e,clearable:!0},(e=a=Object.keys(j).map((e=>u(m("el-option"),{key:e,label:j[e],value:e},null))),"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)?a:{default:()=>[a]}))];var e}}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"电商企业",modelValue:this.soform.providerName,"onUpdate:modelValue":e=>this.soform.providerName=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"unlink-panels":!0,shortcuts:R,"value-format":"YYYY-MM-DD",modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[u("div",{class:"pa-4"},[u(m("el-button"),{style:"width:100px",disabled:0==this.rowsid.length||this.btnloading,class:"ma-1",size:"small",type:"success",onClick:()=>this.examine(this.rowsid,"SUCCESS")},{default:()=>[f("通过")]}),u(m("el-button"),{style:"width:100px",disabled:0==this.rowsid.length||this.btnloading,class:"ma-1",size:"small",type:"danger",onClick:()=>this.examine(this.rowsid,"ERROR")},{default:()=>[f("拒绝")]})]),k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell","onSelection-change":this.tableSelection},{default:()=>[u(m("el-table-column"),{type:"selection",width:"55"},null),u(m("el-table-column"),{prop:"itemNo",label:"商品编号"},{default:({row:e})=>u("a",{href:"javascript:;",onClick:()=>{this.info=e,this.infoshow=!0}},[e.itemNo])}),u(m("el-table-column"),{prop:"hsCode",label:"海关编码"},null),u(m("el-table-column"),{prop:"name",label:"商品名称","min-width":"200px"},null),u(m("el-table-column"),{label:"电商企业","min-width":"200px"},{default:({row:e})=>u("span",null,[e.ebcName||"--"])}),u(m("el-table-column"),{label:"原产国"},{default:({row:e})=>u("span",null,[E[e.country]||"--"])}),u(m("el-table-column"),{label:"类型"},{default:({row:e})=>u("span",null,[j[e.type]||"--"])}),u(m("el-table-column"),{label:"时间"},{default:({row:e})=>u(m("el-time"),{value:e.createTime,type:"datetime"},null)}),u(m("el-table-column"),{label:"状态","min-width":"150px"},{default:({row:e})=>u(m("el-tag"),{effect:"dark",class:"rounded-pill",style:{borderColor:q[e.state||"NONE"]},color:q[e.state||"NONE"]},{default:()=>[u("div",{class:"d-flex align-center"},[u("div",{class:"rounded-circle statecricle mr-1"},null),z[e.state]||"--"])]})}),u(m("el-table-column"),{label:"操作",width:"150px"},{default:({row:e})=>[u(m("el-button"),{style:"width:100px",class:"ma-1",disabled:this.btnloading,round:!0,size:"small",type:"success",plain:!0,onClick:()=>this.examine(e,"SUCCESS")},{default:()=>[f("通过")]}),u(m("el-button"),{style:"width:100px",class:"ma-1",disabled:this.btnloading,round:!0,size:"small",type:"danger",plain:!0,onClick:()=>this.examine(e,"ERROR")},{default:()=>[f("拒绝")]})]})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})]),u(m("el-dialog"),{modelValue:this.infoshow,"onUpdate:modelValue":e=>this.infoshow=e,title:null==(t=this.info)?void 0:t.name},{default:()=>[u(pe,{info:this.info},null)]})])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0,this.$axios.get("/goods",{params:l.data(this.$route.query,{date:this.$route.query.date?this.$route.query.date+"":null})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取商品数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}examine(e,t){if(!e.id&&0==e.length)return this.$message.error("请选择需要审核的商品");let l=l=>{this.btnloading=!0,this.$axios.put("/goods",{id:e==this.rowsid?e:[e.id],state:t,message:l}).then((e=>{this.$message.success("状态更改成功"),this.getList()})).catch((e=>this.$message.error(e.message||"审核失败"))).finally((()=>this.btnloading=!1))};if("ERROR"==t)this.$prompt("请输入拒绝理由","提示",{inputPattern:new RegExp("\\S"),inputErrorMessage:"请输入拒绝理由"}).then((({value:e})=>{l(e)})).catch((()=>{}));else{let a=e==this.rowsid?e.length+"条数据":e.name;this.$confirm("","审核提示",{message:u("span",null,[f("确定要更改"),u("b",null,[a]),f("的状态为"),u("span",{class:"SUCCESS"==t?"green--text":"red--text"},[f(" "),z[t]]),f("吗？")]),callback:e=>{"confirm"==e&&l()}})}}tableSelection(e){this.rowsid=e.map((e=>e.id))}}},{path:"order",name:"ceb-order",meta:{name:"清单报表",icon:"iconshenhe11",value:"CEB_INVT"},component:H,redirect:{name:"ceb-order-603"},children:[{path:"603",name:"ceb-order-603",meta:{name:"出口清单",icon:"C"},component:H,redirect:{name:"ceb-order-603-root"},children:[{path:"",name:"ceb-order-603-root",meta:{name:"出口清单"},component:class extends n{render(){return u(L,{origin:"ceb"},null)}}},{path:"info",name:"ceb-order-603-info",meta:{name:"出口清单详情"},component:class extends n{constructor(){super(...arguments),t(this,"info",null),t(this,"type","603")}render(){var e;return u(F,{info:this.info,keyv:null==(e=this.info)?void 0:e.message.copNo},{default:()=>u(G,{origin:"admin",info:this.info.message,createTime:this.info.createTime,updateTime:this.info.updateTime,invtNo:this.info.invtNo},null),log:()=>{var e;return u(B,{mold:"export",type:this.type,providerId:this.info.providerId,keyv:null==(e=this.info)?void 0:e.message.copNo},null)}})}created(){if(!this.$route.query.id)return this.$message.error("没有找到申报单"),this.$router.back();this.getInfo()}getInfo(){this.$axios.get(`/ceb/${this.type}/info/${this.$route.query.id}`).then((e=>{this.info=e})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.$router.back()}))}}},{path:"log",name:"ceb-order-603-log",meta:{name:"出口清单日志"},component:class extends n{render(){return u(P,{origin:"manage"},null)}}}]},{path:"621",name:"ceb-order-621",meta:{name:"进口清单",icon:"J"},component:H,redirect:{name:"ceb-order-621-root"},children:[{path:"",name:"ceb-order-621-root",meta:{name:"进口清单"},component:class extends n{render(){return u(W,{origin:"ceb"},null)}}},{path:"info",name:"ceb-order-621-info",meta:{name:"进口清单详情"},component:class extends n{constructor(){super(...arguments),t(this,"info",null),t(this,"type","621")}render(){var e;return u(F,{info:this.info,keyv:null==(e=this.info)?void 0:e.message.copNo},{default:()=>{var e,t,l,a,o,s;return u(J,{origin:"manage",info:null==(e=this.info)?void 0:e.message,createTime:null==(t=this.info)?void 0:t.createTime,updateTime:null==(l=this.info)?void 0:l.updateTime,ceb816:null==(a=this.info)?void 0:a.ceb816,tax:null==(o=this.info)?void 0:o.tax,invtNo:null==(s=this.info)?void 0:s.invtNo},null)},log:()=>{var e;return u(B,{type:this.type,providerId:this.info.providerId,keyv:null==(e=this.info)?void 0:e.message.copNo},null)}})}created(){if(!this.$route.query.id)return this.$message.error("没有找到申报单"),this.$router.back();this.getInfo()}getInfo(){this.$axios.get(`/ceb/${this.type}/info/${this.$route.query.id}`).then((e=>{this.info=e})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.$router.back()}))}}},{path:"log",name:"ceb-order-621-log",meta:{name:"进口清单日志"},component:class extends n{render(){return u(Q,{origin:"manage"},null)}}}]}]},{path:"invt/derive",name:"ceb-invt-derive",props:{type:"ceb"},meta:{name:"清单导出",nochild:!0,icon:"iconcz-zxsb",value:"CEB_INVT_E"},component:ge},{path:"count",name:"ceb-count",meta:{name:"统计",icon:"iconhetong",value:"CEB_COUNT"},component:H,redirect:{name:"ceb-count-goods"},children:[{path:"goods",name:"ceb-count-goods",meta:{name:"商品统计",icon:"S"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"disabledDate",(e=>x(e).isAfter(x(x().format("YYYY-MM")+"-01"))))}render(){var e;let t,a;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"month","value-format":"YYYY-MM",placeholder:"选择月"},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"hs编码",modelValue:this.soform.code,"onUpdate:modelValue":e=>this.soform.code=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"进出口类型",modelValue:this.soform.ieFlag,"onUpdate:modelValue":e=>this.soform.ieFlag=e,clearable:!0},me(t=Object.keys(j).map((e=>u(m("el-option"),{key:e,label:j[e],value:e},null))))?t:{default:()=>[t]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"起运国/运抵国",filterable:!0,modelValue:this.soform.country,"onUpdate:modelValue":e=>this.soform.country=e,clearable:!0},me(a=w.map((e=>u(m("el-option"),{key:e.code,label:e.name+"("+e.code+")",value:e.code},{default:()=>[u("div",{class:"d-flex justify-space-between"},[u("span",null,[e.name]),u("span",{class:"grey--text"},[e.code])])]}))))?a:{default:()=>[a]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"贸易方式",modelValue:this.soform.tradeMode,"onUpdate:modelValue":e=>this.soform.tradeMode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"申报地海关代码",modelValue:this.soform.customsCode,"onUpdate:modelValue":e=>this.soform.customsCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"电商企业代码",modelValue:this.soform.ebcCode,"onUpdate:modelValue":e=>this.soform.ebcCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"数据申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"id",label:"hs编码"},null),u(m("el-table-column"),{prop:"total",label:"成交数量"},null),u(m("el-table-column"),{prop:"price",label:"成交金额（万元）"},{default:({row:e})=>u(p,null,[(e.price||0).toFixed(4)])})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0;let e=this.$route.query.date?this.$route.query.date+"-01":x().format("YYYY-MM")+"-01",t=x(e).endOf("month").format("YYYY-MM-DD");this.soform.date=x(e).format("YYYY-MM"),this.$axios.get("/count/goods",{params:l.data(this.$route.query,{date:e+","+t})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}},{path:"tax",name:"ceb-count-tax",meta:{name:"税单金额统计",icon:"S"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"disabledDate",(e=>x(e).isAfter(x(x().format("YYYY-MM")+"-01"))))}render(){var e;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"month","value-format":"YYYY-MM",placeholder:"选择月"},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"hs编码",modelValue:this.soform.code,"onUpdate:modelValue":e=>this.soform.code=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"贸易方式",modelValue:this.soform.tradeMode,"onUpdate:modelValue":e=>this.soform.tradeMode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"申报地海关代码",modelValue:this.soform.customsCode,"onUpdate:modelValue":e=>this.soform.customsCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"电商企业代码",modelValue:this.soform.ebcCode,"onUpdate:modelValue":e=>this.soform.ebcCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"数据申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"id",label:"企业编码"},null),u(m("el-table-column"),{prop:"ebcName",label:"企业名称"},null),u(m("el-table-column"),{prop:"customsTax",label:"应征关税（万元）"},{default:({row:e})=>u(p,null,[(e.customsTax||0).toFixed(4)])}),u(m("el-table-column"),{prop:"consumptionTax",label:"应征消费税（万元）"},{default:({row:e})=>u(p,null,[(e.consumptionTax||0).toFixed(4)])}),u(m("el-table-column"),{prop:"valueAddedTax",label:"应征增值税（万元）"},{default:({row:e})=>u(p,null,[(e.valueAddedTax||0).toFixed(4)])}),u(m("el-table-column"),{prop:"valueAddedTax",label:"清单数量"},{default:({row:e})=>u(p,null,[e.total||0])}),u(m("el-table-column"),{prop:"valueAddedTax",label:"清单金额（万元）"},{default:({row:e})=>u(p,null,[(e.price||0).toFixed(4)])})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0;let e=this.$route.query.date?this.$route.query.date+"-01":x().format("YYYY-MM")+"-01",t=x(e).endOf("month").format("YYYY-MM-DD");this.soform.date=x(e).format("YYYY-MM"),this.$axios.get("/count/tax",{params:l.data(this.$route.query,{date:e+","+t})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}},{path:"invt",name:"ceb-count-invt",meta:{name:"清单金额和数量统计",icon:"Q"},component:he},{path:"country",name:"ceb-count-country",meta:{name:"国家清单数量统计",icon:"G"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"disabledDate",(e=>x(e).isAfter(x(x().format("YYYY-MM")+"-01"))))}render(){var e;let t,a;return u(p,null,[u("div",{class:"white px-5 py-4"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"month","value-format":"YYYY-MM",placeholder:"选择月"},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"进出口类型",modelValue:this.soform.ieFlag,"onUpdate:modelValue":e=>this.soform.ieFlag=e,clearable:!0},ue(t=Object.keys(j).map((e=>u(m("el-option"),{key:e,label:j[e],value:e},null))))?t:{default:()=>[t]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-select"),{placeholder:"起运国/运抵国",filterable:!0,modelValue:this.soform.country,"onUpdate:modelValue":e=>this.soform.country=e,clearable:!0},ue(a=w.map((e=>u(m("el-option"),{key:e.code,label:e.name+"("+e.code+")",value:e.code},{default:()=>[u("div",{class:"d-flex justify-space-between"},[u("span",null,[e.name]),u("span",{class:"grey--text"},[e.code])])]}))))?a:{default:()=>[a]})]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"贸易方式",modelValue:this.soform.tradeMode,"onUpdate:modelValue":e=>this.soform.tradeMode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"申报地海关代码",modelValue:this.soform.customsCode,"onUpdate:modelValue":e=>this.soform.customsCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"电商企业代码",modelValue:this.soform.ebcCode,"onUpdate:modelValue":e=>this.soform.ebcCode=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"数据申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"id",label:"国家"},{default:({row:e})=>u(p,null,[u("span",null,[E[e.id]||e.id]),u("span",{class:"ml-1 grey--text font-size-0"},[f("("),e.id,f(")")])])}),u(m("el-table-column"),{prop:"total",label:"清单数量"},null),u(m("el-table-column"),{prop:"price",label:"清单金额（万元）"},{default:({row:e})=>u(p,null,[(e.price||0).toFixed(4)])})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0;let e=this.$route.query.date?this.$route.query.date+"-01":x().format("YYYY-MM")+"-01",t=x(e).endOf("month").format("YYYY-MM-DD");this.soform.date=x(e).format("YYYY-MM"),this.$axios.get("/count/country",{params:l.data(this.$route.query,{date:e+","+t})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}},{path:"warn",name:"ceb-count-warn",meta:{name:"风控数据统计",icon:"F"},component:H,redirect:{name:"ceb-count-warn-root"},children:[{path:"",name:"ceb-count-warn-root",meta:{name:"风控数据统计"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"disabledDate",(e=>x(e).isAfter(x(x().subtract(1,"months").format("YYYY-MM")+"-01"))))}render(){return u(p,null,[u("div",{class:"white px-5 py-4 mb-2"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-date-picker"),{"disabled-date":this.disabledDate,modelValue:this.soform.date,"onUpdate:modelValue":e=>this.soform.date=e,type:"month","value-format":"YYYY-MM",placeholder:"选择月"},null)]}),u(m("el-form-item"),null,{default:()=>[u(de,{placeholder:"数据申报企业",modelValue:this.soform.providerId,"onUpdate:modelValue":e=>this.soform.providerId=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout((()=>{this.getList()}))}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},"row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"date",label:"月份"},{default:({row:e})=>u(m("el-time"),{value:e.date,type:"format",format:"YYYY-MM"},null)}),u(m("el-table-column"),{prop:"provider.name",label:"申报企业"},null),u(m("el-table-column"),{label:"同一收货人不同订购"},{default:({row:e})=>0!=(e.buyPhone||0)?u(m("router-link"),{to:{name:"ceb-count-warn-info",query:{id:e.id,type:1}}},{default:()=>[e.buyPhone||0]}):u("span",null,[e.buyPhone||0])}),u(m("el-table-column"),{label:"订单同商品数量超过5个"},{default:({row:e})=>0!=(e.goodsTotal||0)?u(m("router-link"),{to:{name:"ceb-count-warn-info",query:{id:e.id,type:2}}},{default:()=>[e.goodsTotal||0]}):u("span",null,[e.goodsTotal||0])}),u(m("el-table-column"),{label:"收货人相同商品"},{default:({row:e})=>0!=(e.phoneGoods||0)?u(m("router-link"),{to:{name:"ceb-count-warn-info",query:{id:e.id,type:3}}},{default:()=>[e.phoneGoods||0]}):u("span",null,[e.phoneGoods||0])}),u(m("el-table-column"),{label:"收货人订单数量超过15单"},{default:({row:e})=>0!=(e.phoneOrder||0)?u(m("router-link"),{to:{name:"ceb-count-warn-info",query:{id:e.id,type:4}}},{default:()=>[e.phoneOrder||0]}):u("span",null,[e.phoneOrder||0])})]}),[[Y("loading"),this.loading]])])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.loading=!0;let e=this.$route.query.date?this.$route.query.date+"-01":x().subtract(1,"months").format("YYYY-MM")+"-01",t=x(e).endOf("month").format("YYYY-MM-DD");this.soform.date=x(e).format("YYYY-MM"),this.$axios.get("/count/warn",{params:l.data(this.$route.query,{date:e+","+t})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}},{path:"info",name:"ceb-count-warn-info",meta:{name:"风控数据统计详情"},component:class extends n{constructor(){super(...arguments),t(this,"list",null),t(this,"realData",null),t(this,"loading",!1),t(this,"isshow",!1),t(this,"warnType",{1:"同收货人不同订单",2:"同订单同商品数量超过5个",3:"同收货人相同商品",4:"同收货人订单数量超过15单"}),t(this,"tableDataPage",null)}get type(){return Number(this.$route.query.type)}created(){var e,t;if(!(null==(e=this.$route.query)?void 0:e.type)||!(null==(t=this.$route.query)?void 0:t.id))return this.$message.error("没有找到详情信息"),void setTimeout((()=>{this.$router.back()}),500);this.getList()}render(){return u(m("el-skeleton"),{loading:0==this.isshow},{default:()=>u(p,null,[u("div",{class:"white px-6 py-4 align-center mb-2"},[u(m("el-breadcrumb"),{"separator-class":"el-icon-arrow-right"},{default:()=>[u(m("el-breadcrumb-item"),{to:{name:"ceb-count-warn"}},{default:()=>[u("span",{class:"grey--text font-weight-medium"},[f("风控数据统计")])]}),u(m("el-breadcrumb-item"),null,{default:()=>[u("span",{class:"black--text"},[f("风控数据统计详情"),u("span",{class:"font-size-0 grey--text"},[f("（"),this.warnType[this.$route.query.type],f("）")])])]})]})]),k(u(m("el-table"),{data:this.tableDataPage,style:{width:"100%"}},{default:()=>[u(m("el-table-column"),{prop:"orderNo",label:"订单编号"},null),u(m("el-table-column"),{prop:"invtNo",label:"清单编号"},null),u(m("v-if"),{show:[1,4].includes(this.type)},{default:()=>[u(m("el-table-column"),{prop:"buyerName",label:"订购人"},null)]}),u(m("v-if"),{show:[1,3,4].includes(this.type)},{default:()=>[u(m("el-table-column"),{prop:"consignee",label:"收货人"},null),u(m("el-table-column"),{prop:"consigneeTelephone",label:"收货人电话"},null)]}),u(m("v-if"),{show:[2,3].includes(this.type)},{default:()=>[u(m("el-table-column"),{prop:"gname",label:"商品名称"},null),u(m("el-table-column"),{prop:"itemNo",label:"企业商品编码"},null),u(m("el-table-column"),{prop:"gcode",label:"海关商品编码"},null),u(m("el-table-column"),{prop:"qty",label:"数量"},null)]}),u(m("v-if"),{show:2==this.type},{default:()=>[u(m("el-table-column"),{prop:"price",label:"单价"},null),u(m("el-table-column"),{prop:"totalPrice",label:"总价"},null)]}),u(m("el-table-column"),{prop:"providerName",label:"申报企业"},null)]}),[[Y("loading"),this.loading]]),u("div",{class:"text-center py-6"},[u(S,{modelValue:this.loading,"onUpdate:modelValue":e=>this.loading=e,realData:this.tableData,onChange:e=>{this.tableDataPage=e,this.toUPScroll(".layout-scroll")}},null)])])})}getList(){this.loading=!0,this.$axios.get(`/count/warn/${this.$route.query.id}/${this.type}`).then((e=>{this.realData=e,this.isshow||(this.isshow=!0),this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.$router.back()})).finally((()=>this.loading=!1))}get tableData(){var e,t,l,a;let o=[];switch(this.type){case 1:null==(e=this.realData)||e.map((e=>{o.push({orderNo:e.inventory.head.orderNo,invtNo:e.invtNo,providerName:e.provider.name,buyerName:e.inventory.head.buyerName,consignee:e.inventory.head.consignee,consigneeTelephone:e.inventory.head.consigneeTelephone})}));break;case 2:null==(t=this.realData)||t.map((e=>{e.inventory.list.map((t=>{t.qty>5&&o.push({orderNo:e.inventory.head.orderNo,invtNo:e.invtNo,providerName:e.provider.name,gname:t.gname,itemNo:t.itemNo,gcode:t.gcode,qty:t.qty,price:t.price,totalPrice:t.totalPrice})}))}));break;case 3:null==(l=this.realData)||l.map((e=>{e.inventory.list.map((t=>{o.push({orderNo:e.inventory.head.orderNo,invtNo:e.invtNo,providerName:e.provider.name,gname:t.gname,itemNo:t.itemNo,gcode:t.gcode,qty:t.qty,consignee:e.inventory.head.consignee,consigneeTelephone:e.inventory.head.consigneeTelephone})}))}));break;case 4:null==(a=this.realData)||a.map((e=>{o.push({orderNo:e.inventory.head.orderNo,invtNo:e.invtNo,providerName:e.provider.name,buyerName:e.inventory.head.buyerName,consignee:e.inventory.head.consignee,consigneeTelephone:e.inventory.head.consigneeTelephone})}))}return o}}}]}]}]};var ye="_main_zya31_1",xe="_header_zya31_5",ve="_iconbg_zya31_9",we="_icon_zya31_9",ke="_outicon_zya31_26",Ye="_aside_zya31_32";const Ve={path:"tax",name:"tax",meta:{name:"税务辅助"},component:H,redirect:{name:"tax-order"},children:[{path:"order",name:"tax-order",meta:{name:"清单列表",nochild:!0,icon:"iconhetong"},component:class extends n{render(){return u(L,{origin:"ceb",istype:"tax"},null)}}},{path:"derive",name:"tax-derive",props:{type:"tax"},meta:{name:"免税明细报表",nochild:!0,icon:"iconcz-zxsb"},component:ge}]};const Ne={path:"safe",name:"safe",meta:{name:"外汇管理"},component:H,redirect:{name:"safe-order"},children:[{path:"order",name:"safe-order",meta:{name:"清单报表",icon:"iconshenhe11"},component:H,redirect:{name:"safe-order-603"},children:[{path:"603",name:"safe-order-603",meta:{name:"出口清单",icon:"C"},component:class extends n{render(){return u(L,{origin:"ceb",istype:"safe"},null)}}},{path:"621",name:"safe-order-621",meta:{name:"进口清单",icon:"J"},component:class extends n{render(){return u(W,{origin:"ceb",istype:"safe"},null)}}}]},{path:"invt/derive",name:"safe-invt-derive",props:{type:"safe"},meta:{name:"清单导出",nochild:!0,icon:"iconcz-zxsb"},component:ge}]};class Ce extends n{constructor(){super(...arguments),t(this,"ismarket"),t(this,"loading",!1),t(this,"tableData",null),t(this,"page",null),t(this,"soform",{}),t(this,"xlsxloading",!1)}render(){var e;return u(p,null,[u("div",{class:"white px-5 py-4 mb-2"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"企业名称",modelValue:this.soform.name,"onUpdate:modelValue":e=>this.soform.name=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"企业代码",modelValue:this.soform.code,"onUpdate:modelValue":e=>this.soform.code=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout(this.getList)}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]}),u(m("v-if"),{show:this.ismarket},{default:()=>[u(m("el-button"),{type:"warning",round:!0,onClick:this.exportXlsx,loading:this.xlsxloading},{default:()=>[f("导出企业数据")]})]})]})]})]),u("div",{class:"white px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"},class:"providerTable","row-class-name":({rowIndex:e})=>e%2==0?"":"stripe-row","header-cell-class-name":"header-cell"},{default:()=>[u(m("el-table-column"),{prop:"name",label:"企业名称"},{default:({row:e})=>u("a",{href:e.url,target:"_blank"},[e.name||"--"])}),u(m("el-table-column"),{prop:"code",label:"企业编码"},null),u(m("el-table-column"),{prop:"dxpId",label:"dxpId"},{default:({row:e})=>u(p,null,[e.dxpId||"--"])}),u(m("el-table-column"),{prop:"region",label:"区域"},{default:({row:e})=>u(p,null,[D.exports.CodeToText[e.region[0]],D.exports.CodeToText[e.region[1]],D.exports.CodeToText[e.region[2]]])}),u(m("el-table-column"),{prop:"type",label:"类型"},{default:({row:e})=>e.type.map(((e,t)=>(0==t?"":"，")+Z[e]))}),u(m("el-table-column"),{label:"时间"},{default:({row:e})=>u(m("el-time"),{value:e.createTime,type:"datetime"},null)}),u(m("el-table-column"),{prop:"type",label:"状态"},{default:({row:e})=>"ERROR"==e.state?u(m("el-tooltip"),{placement:"top",effect:"light"},{content:()=>u("span",{class:"red--text"},[`失败原因：${e.message}`]),default:()=>u(m("el-tag"),{effect:"dark",class:"rounded-pill",style:{borderColor:q[e.state||"NONE"]},color:q[e.state||"NONE"]},{default:()=>[u("div",{class:"d-flex align-center"},[u("div",{class:"rounded-circle statecricle mr-1"},null),z[e.state]||"--"])]})}):u(m("el-tag"),{effect:"dark",class:"rounded-pill",style:{borderColor:q[e.state||"NONE"]},color:q[e.state||"NONE"]},{default:()=>[u("div",{class:"d-flex align-center"},[u("div",{class:"rounded-circle statecricle mr-1"},null),z[e.state]||"--"])]})})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.getList()}getList(){this.loading=!0;let e="/region";this.ismarket&&(e="/provider"),this.$axios.get(e,{params:l.data(this.$route.query,{state:"SUCCESS"})}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}exportXlsx(){this.xlsxloading=!0,this.$axios.get("/provider/excel").then((e=>{this.xlsxloading=!1;let t=`企业数据${x().format("YYYY-MM-DD")}.xlsx`,l=XLSX.utils.book_new(),a=XLSX.utils.aoa_to_sheet([["企业编号","企业名称","法人代表","行政区","联系人","联系方式"],...e.map((e=>{var t,l,a,o,s,i;return[e.code,e.name,null==(l=null==(t=e.company)?void 0:t.legal)?void 0:l.name,D.exports.CodeToText[e.region[0]]+"/"+D.exports.CodeToText[e.region[1]]+"/"+D.exports.CodeToText[e.region[2]],null==(o=null==(a=e.company)?void 0:a.linkMan)?void 0:o.name,null==(i=null==(s=e.company)?void 0:s.linkMan)?void 0:i.phone]}))]);XLSX.utils.book_append_sheet(l,a,"企业数据"),XLSX.writeFile(l,t)})).catch((e=>{this.$message.error(e.message||"获取企业数据失败")}))}}h([b({type:Boolean,default:!1})],Ce.prototype,"ismarket",void 0);const De={path:"region",name:"region",meta:{name:"行政区"},component:H,redirect:{name:"region-provider"},children:[{path:"provider",name:"region-provider",meta:{name:"企业",nochild:!0,icon:"iconqiye2"},component:Ce},{path:"order",name:"region-order",meta:{name:"清单报表",icon:"iconshenhe11"},component:H,redirect:{name:"region-order-603"},children:[{path:"603",name:"region-order-603",meta:{name:"出口清单",icon:"C"},component:class extends n{render(){return u(L,{origin:"ceb",istype:"region"},null)}}},{path:"621",name:"region-order-621",meta:{name:"进口清单",icon:"J"},component:class extends n{render(){return u(W,{origin:"ceb",istype:"region"},null)}}}]},{path:"count",name:"region-count",props:{origin:"region"},meta:{name:"清单统计",nochild:!0,icon:"iconhetong"},component:he}]};const $e={path:"market",name:"market",meta:{name:"市场局"},component:H,redirect:{name:"market-provider"},children:[{path:"provider",name:"market-provider",meta:{name:"企业",nochild:!0,icon:"iconqiye"},component:class extends n{render(){return u(Ce,{ismarket:!0},null)}}}]};var Me="_socard_y9k8h_1";function Ie(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!v(e)}class Ue extends n{constructor(){super(...arguments),t(this,"isAdd"),t(this,"form",{ieFlag:"E"}),t(this,"fromRef"),t(this,"formErr",{}),t(this,"orderlist",[]),t(this,"sonumber",0),t(this,"orderinfo",{}),t(this,"sostr",null)}render(){let e,t,l,o;return u(p,null,[u("div",{class:"white px-6 py-4 align-center"},[u(m("el-breadcrumb"),{"separator-class":"el-icon-arrow-right"},{default:()=>[u(m("el-breadcrumb-item"),{to:{name:"ceb-provider-list"}},{default:()=>[u("span",{class:"grey--text font-weight-medium"},[f("报关单")])]}),u(m("el-breadcrumb-item"),null,{default:()=>[u("span",{class:"black--text"},[f("添加报关单")])]})]})]),u("div",{class:"white mt-2 pa-6"},[u(m("el-form"),{ref:"fromRef",model:this.form,"label-width":"160px"},{default:()=>[u(m("el-row"),{gutter:20},{default:()=>[u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"preEntryId",label:"报关单编号：",error:this.formErr.preEntryId,rules:[a.notBlank("输入报关单编号")]},{default:()=>[u(m("el-input"),{placeholder:"输入报关单编号",clearable:!0,modelValue:this.form.preEntryId,"onUpdate:modelValue":e=>this.form.preEntryId=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"entryId",label:"海关编号：",error:this.formErr.entryId,rules:[a.notBlank("输入海关编号")]},{default:()=>[u(m("el-input"),{placeholder:"输入海关编号",clearable:!0,modelValue:this.form.entryId,"onUpdate:modelValue":e=>this.form.entryId=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"agentCode",label:"申报单位代码：",error:this.formErr.agentCode,rules:[a.notBlank("输入申报单位代码")]},{default:()=>[u(m("el-input"),{placeholder:"输入申报单位代码",clearable:!0,modelValue:this.form.agentCode,"onUpdate:modelValue":e=>this.form.agentCode=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"agentName",label:"申报单位名称：",error:this.formErr.agentName,rules:[a.notBlank("输入申报单位名称")]},{default:()=>[u(m("el-input"),{placeholder:"输入申报单位名称",clearable:!0,modelValue:this.form.agentName,"onUpdate:modelValue":e=>this.form.agentName=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"tradeCode",label:"境内发货人编号：",error:this.formErr.tradeCode,rules:[a.notBlank("输入境内发货人编号")]},{default:()=>[u(m("el-input"),{placeholder:"输入境内发货人编号",clearable:!0,modelValue:this.form.tradeCode,"onUpdate:modelValue":e=>this.form.tradeCode=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"tradeName",label:"境内发货人名称：",error:this.formErr.tradeName,rules:[a.notBlank("输入境内发货人名称")]},{default:()=>[u(m("el-input"),{placeholder:"输入境内发货人名称",clearable:!0,modelValue:this.form.tradeName,"onUpdate:modelValue":e=>this.form.tradeName=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"ownerCode",label:"生产销售单位代码：",error:this.formErr.ownerCode,rules:[a.notBlank("输入生产销售单位代码")]},{default:()=>[u(m("el-input"),{placeholder:"输入生产销售单位代码",clearable:!0,modelValue:this.form.ownerCode,"onUpdate:modelValue":e=>this.form.ownerCode=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"ownerName",label:"生产销售单位名称：",error:this.formErr.ownerName,rules:[a.notBlank("输入生产销售单位名称")]},{default:()=>[u(m("el-input"),{placeholder:"输入生产销售单位名称",clearable:!0,modelValue:this.form.ownerName,"onUpdate:modelValue":e=>this.form.ownerName=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"clearanceDate",label:"申报日期：",error:this.formErr.clearanceDate,rules:[a.notBlank("选择申报日期")]},{default:()=>[u(m("el-date-picker"),{modelValue:this.form.clearanceDate,"onUpdate:modelValue":e=>this.form.clearanceDate=e,type:"date",placeholder:"选择申报日期","value-format":"YYYY-MM-DD",style:{width:"100%"}},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"trafMode",label:"运输方式：",error:this.formErr.trafMode,rules:[a.notBlank("选择运输方式","change")]},{default:()=>[u(m("el-select"),{modelValue:this.form.trafMode,"onUpdate:modelValue":e=>this.form.trafMode=e,placeholder:"选择运输方式",style:{width:"100%"}},Ie(e=Object.keys(ee).map((e=>u(m("el-option"),{key:e,value:e,label:ee[e]},null))))?e:{default:()=>[e]})]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"billNo",label:"提运单号：",error:this.formErr.billNo,rules:[a.notBlank("输入提运单号")]},{default:()=>[u(m("el-input"),{placeholder:"输入提运单号",clearable:!0,modelValue:this.form.billNo,"onUpdate:modelValue":e=>this.form.billNo=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"tradeMode",label:"监管方式：",error:this.formErr.tradeMode,rules:[a.notBlank("输入监管方式")]},{default:()=>[u(m("el-input"),{placeholder:"输入监管方式",clearable:!0,modelValue:this.form.tradeMode,"onUpdate:modelValue":e=>this.form.tradeMode=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"tradeCountry",label:"运抵国：",error:this.formErr.tradeCountry,rules:[a.notBlank("选择运抵国")]},{default:()=>[u(m("el-select"),{filterable:!0,modelValue:this.form.tradeCountry,"onUpdate:modelValue":e=>this.form.tradeCountry=e,placeholder:"选择运抵国",style:{width:"100%"}},Ie(t=w.map((e=>u(m("el-option"),{key:e.code,value:e.code,label:e.name+`(${e.code})`},{default:()=>[u("div",{class:"d-flex"},[u("div",{class:" flex-grow-1"},[e.name]),u("div",{class:"font-size-1 grey--text"},[e.code])])]}))))?t:{default:()=>[t]})]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"tradeCountry",label:"包装种类：",error:this.formErr.tradeCountry,rules:[a.notBlank("选择包装种类")]},{default:()=>[u(m("el-select"),{filterable:!0,modelValue:this.form.warpType,"onUpdate:modelValue":e=>this.form.warpType=e,placeholder:"选择包装种类",style:{width:"100%"}},Ie(l=$.map((e=>u(m("el-option"),{key:e.code,value:e.code,label:e.name},null))))?l:{default:()=>[l]})]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"packNo",label:"件数：",error:this.formErr.packNo,rules:[a.notBlank("输入件数")]},{default:()=>[u(m("el-input"),{placeholder:"输入件数",type:"number",clearable:!0,modelValue:this.form.packNo,"onUpdate:modelValue":e=>this.form.packNo=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"grossWet",label:"毛重：",error:this.formErr.grossWet,rules:[a.notBlank("输入毛重")]},{default:()=>[u(m("el-input"),{placeholder:"输入毛重",type:"number",clearable:!0,modelValue:this.form.grossWet,"onUpdate:modelValue":e=>this.form.grossWet=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"netWet",label:"净重：",error:this.formErr.netWet,rules:[a.notBlank("输入净重")]},{default:()=>[u(m("el-input"),{placeholder:"输入净重",type:"number",clearable:!0,modelValue:this.form.netWet,"onUpdate:modelValue":e=>this.form.netWet=e},null)]})]}),u(m("el-col"),{xs:12,sm:12,md:12,lg:8,xl:8},{default:()=>[u(m("el-form-item"),{prop:"status",label:"报关单状态：",error:this.formErr.status,rules:[a.notBlank("选择报关单状态")]},{default:()=>[u(m("el-select"),{filterable:!0,modelValue:this.form.status,"onUpdate:modelValue":e=>this.form.status=e,placeholder:"选择报关单状态",style:{width:"100%"}},Ie(o=Object.keys(K).map((e=>u(m("el-option"),{key:e,value:e,label:K[e]},null))))?o:{default:()=>[o]})]})]}),u(m("el-col"),{span:24},{default:()=>[u(m("el-form-item"),{prop:"note",label:"备注：",error:this.formErr.note},{default:()=>[u(m("el-input"),{placeholder:"输入备注",type:"number",clearable:!0,modelValue:this.form.note,"onUpdate:modelValue":e=>this.form.note=e},null)]})]}),u(m("el-col"),{span:24},{default:()=>[u(m("el-form-item"),{prop:"oid",label:"关联订单：",error:this.formErr.oid,rules:[a.notBlank("选择关联订单","change")],style:{position:"relative"}},{default:()=>{var e;return[u(m("el-input"),{placeholder:"搜索订单",modelValue:this.sostr,"onUpdate:modelValue":e=>this.sostr=e,onInput:e=>{this.sonumber=e.length,e&&e.length>1&&this.getOrderList(e)}},null),u(m("v-if"),{show:null==(e=this.orderinfo)?void 0:e.id},{default:()=>[u(m("el-card"),{class:Me},{default:()=>{var e;return[u(m("el-button"),{type:"primary",size:"mini",onClick:this.selOrder,disabled:null==(e=this.form.oid)?void 0:e.includes(this.orderinfo.id)},{default:()=>{var e;return[(null==(e=this.form.oid)?void 0:e.includes(this.orderinfo.id))?"已选":"确定"]}}),u(m("el-button"),{size:"mini",onClick:()=>{this.orderinfo=null,this.sostr=null}},{default:()=>[f("取消")]}),u(m("el-row"),null,{default:()=>[u(m("el-col"),{span:12},{default:()=>[f("订单号："),this.orderinfo.message.orderNo]}),u(m("el-col"),{span:12},{default:()=>[f("区域："),D.exports.CodeToText[this.orderinfo.region[0]],f(" / "),D.exports.CodeToText[this.orderinfo.region[1]],f(" / "),D.exports.CodeToText[this.orderinfo.region[2]]]}),u(m("el-col"),{span:12},{default:()=>[f("电商企业代码："),this.orderinfo.message.ebcCode]}),u(m("el-col"),{span:12},{default:()=>[f("电商企业名称："),this.orderinfo.message.ebcName]}),u(m("el-col"),{span:12},{default:()=>[f("电商平台代码："),this.orderinfo.message.ebpCode]}),u(m("el-col"),{span:12},{default:()=>[f("电商平台名称："),this.orderinfo.message.ebpName]})]})]}})]}),u("div",{class:"mt-3"},[f("已选订单："),u(m("el-card"),null,{default:()=>[k(u(m("el-table"),{data:this.orderlist},{default:()=>[u(m("el-table-column"),{prop:"message.orderNo",label:"订单号"},null),u(m("el-table-column"),{prop:"message.ebcCode",label:"电商企业代码"},null),u(m("el-table-column"),{prop:"message.ebcName",label:"电商企业名称"},null),u(m("el-table-column"),{prop:"message.ebpCode",label:"电商平台代码"},null),u(m("el-table-column"),{prop:"message.ebpName",label:"电商平台名称"},null),u(m("el-table-column"),{label:"操作"},{default:({row:e,$index:t})=>u(m("el-popconfirm"),{icon:"el-icon-info",iconColor:"red",title:"确定删除吗？",onConfirm:()=>{this.form.oid.splice(this.form.oid.indexOf(e.id),1),this.orderlist.splice(t,1)}},{reference:()=>u(m("el-button"),{size:"mini",type:"danger"},{default:()=>[f("移除")]})})})]}),[[C,this.orderlist.length>0]]),k(u("div",{class:"text-center"},[f("暂无数据")]),[[C,0==this.orderlist.length]])]})])]}})]})]})]}),u("div",{class:"text-center pa-8"},[u(m("el-button"),{type:"primary",class:"mr-4",style:{width:"150px"},onClick:this.post},{default:()=>[f("提 交")]})])])])}created(){this.$route.query.id&&!this.isAdd?(this.getInfo(this.$route.query.id),this.getInfoOrder(this.$route.query.id)):this.isAdd||(this.$message.error("找不到报关单"),this.$router.back())}getInfo(e){this.$axios.get("/declaration/"+e).then((e=>this.form=e)).catch((e=>{this.$message.error(e.message||"找不到报关单"),this.$router.back()}))}post(){this.formErr={},this.fromRef.validate(((e,t)=>{e?this.$axios.post("/declaration",this.form).then((e=>{this.$message.success(this.isAdd?"添加成功":"修改成功"),this.$router.back()})).catch((e=>{e.data?(this.$msgbox({title:"数据校验错误",type:"warning",message:u("ul",null,[Object.keys(e.data).map((t=>u("li",null,[t+"："+e.data[t]])))])}),this.formErr=e.data):this.$message.error(e.message||"提交失败")})):this.$msgbox({title:"数据校验错误",type:"warning",message:u("ul",null,[Object.keys(t).map((e=>u("li",null,[t[e][0].message])))])})}))}getOrderList(e){this.$axios.get("/declaration/order/"+e).then((e=>{e.id?this.orderinfo=e:this.orderinfo=null}))}selOrder(){var e;if(this.form.oid||(this.form.oid=[]),null==(e=this.form.oid)?void 0:e.includes(this.orderinfo.id))return this.orderinfo=null,void(this.sostr=null);this.form.oid.push(this.orderinfo.id),this.orderlist.push(this.orderinfo),this.orderinfo=null,this.sostr=null}getInfoOrder(e){this.$axios.get("/declaration/order/all/"+e).then((e=>this.orderlist=e))}}h([b({type:Boolean,default:!1})],Ue.prototype,"isAdd",void 0),h([N("fromRef")],Ue.prototype,"fromRef",void 0);const Te={path:"declaration",name:"declaration",meta:{name:"报关单"},component:H,redirect:{name:"declaration-root"},children:[{path:"",name:"declaration-root",meta:{name:"报关单列表",nochild:!0,icon:"iconbeian"},component:H,redirect:{name:"declaration-root-list"},children:[{path:"",name:"declaration-root-list",meta:{name:"报关单列表",icon:"iconbeian"},component:class extends n{constructor(){super(...arguments),t(this,"soform",{}),t(this,"tableData",null),t(this,"loading",!1),t(this,"page",null)}render(){var e;return u(p,null,[u("div",{class:"white px-5 py-4 mb-2"},[u(m("el-form"),{model:this.soform,inline:!0,class:"mb-n4 sofrom"},{default:()=>[u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"报关单编号",modelValue:this.soform.preEntryId,"onUpdate:modelValue":e=>this.soform.preEntryId=e,clearable:!0},null)]}),u(m("el-form-item"),null,{default:()=>[u(m("el-input"),{placeholder:"提运单号",modelValue:this.soform.billNo,"onUpdate:modelValue":e=>this.soform.billNo=e,clearable:!0},null)]}),u(m("el-form-item"),{class:"ml-2"},{default:()=>[u(m("el-button"),{type:"primary",round:!0,onClick:()=>{this.$router.push({query:l.data(this.soform,{page:1})}),setTimeout(this.getList)}},{default:()=>[f("查询")]}),u(m("el-button"),{round:!0,onClick:()=>this.soform={}},{default:()=>[f("重置")]}),u(m("router-link"),{to:{name:"declaration-root-add"},class:"el-button el-button--success is-round"},{default:()=>[f("添加报关单")]})]})]})]),u("div",{class:"white mt-2 px-4 pt-2 pb-10"},[k(u(m("el-table"),{data:this.tableData,style:{width:"100%"}},{default:()=>[u(m("el-table-column"),{prop:"preEntryId",label:"报关单编号"},{default:({row:e})=>u(m("router-link"),{to:{name:"declaration-root-edit",query:{id:e.id}}},{default:()=>[e.preEntryId]})}),u(m("el-table-column"),{prop:"oid",label:"关联订单数量"},{default:({row:e})=>{var t;return u(p,null,[(null==(t=e.oid)?void 0:t.length)||0])}}),u(m("el-table-column"),{prop:"billNo",label:"提运单号"},null),u(m("el-table-column"),{prop:"tradeName",label:"境内发货人名称"},null),u(m("el-table-column"),{prop:"packNo",label:"件数"},null),u(m("el-table-column"),{prop:"grossWet",label:"毛重"},null),u(m("el-table-column"),{prop:"netWet",label:"净重"},null),u(m("el-table-column"),{prop:"agentName",label:"申报单位名称"},null),u(m("el-table-column"),{prop:"createTime",label:"添加时间"},{default:({row:e})=>u(m("el-time"),{value:e.createTime,type:"datetime"},null)}),u(m("el-table-column"),{prop:"status",label:"状态"},{default:({row:e})=>u(m("el-tag"),{effect:"dark",class:"rounded-pill",style:{borderColor:X[e.status||0]},color:X[e.status||0]},{default:()=>[u("div",{class:"d-flex align-center"},[u("div",{class:"rounded-circle statecricle mr-1"},null),K[e.status]||"--"])]})})]}),[[Y("loading"),this.loading]]),u(m("v-if"),{show:null!=this.page&&0!=(null==(e=this.page)?void 0:e.count)},{default:()=>[u("div",{class:"text-center py-6"},[u(m("el-page"),{value:this.page,router:!0,onChange:()=>setTimeout(this.getList)},null)])]})])])}created(){this.soform=l.data(this.$route.query),this.getList()}getList(){this.$axios.get("/declaration",{params:l.data(this.$route.query)}).then((({list:e,page:t})=>{this.tableData=e,this.page=t,this.toUPScroll(".layout-scroll")})).catch((e=>{this.$message.error(e.message||"获取数据失败"),this.tableData=null,this.page=null})).finally((()=>this.loading=!1))}}},{path:"add",name:"declaration-root-add",props:{isAdd:!0},meta:{name:"添加报关单"},component:Ue},{path:"edit",name:"declaration-root-edit",props:{isAdd:!1},meta:{name:"修改报关单"},component:Ue}]}]};class je extends n{constructor(){super(...arguments),t(this,"user"),t(this,"routerData",{ceb:be,tax:Ve,safe:Ne,region:De,market:$e,declaration:Te}),t(this,"downicon",!1)}render(){return u(m("el-container"),{style:"height: 100vh"},{default:()=>[u(m("v-if"),{show:null!=this.routerData[this.$route.matched[1].name]},{default:()=>[u(m("el-aside"),{width:"250px",class:Ye,style:{background:"#3064fe"}},{default:()=>{var e,t;return[u("div",{class:"text-center mt-5"},[u(m("router-link"),{to:"/"},{default:()=>[u("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAAcCAYAAACzpld9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM2MCwgMjAyMC8wMi8xMy0wMTowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiMTM1YzYyOS0yOGIyLTQxNDMtYTRkOC1jYjg1MDY2MDE2MTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REVGNDFBNUI0RENDMTFFQzhDQ0M5NjFDN0VGRDQ0QzQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REVGNDFBNUE0RENDMTFFQzhDQ0M5NjFDN0VGRDQ0QzQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjM4Yjc1MDgtM2I1YS03NjQyLWJhMzctNDljYTNmNWRjY2U5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmIxMzVjNjI5LTI4YjItNDE0My1hNGQ4LWNiODUwNjYwMTYxMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmY887IAAAUNSURBVHja7FvdjaMwECarXAG83dtJbAmbEkgJbAlJCaEEKCGUsJQQl7CUEKR7uzcKuIecHY11s7Mz2GaBsBIjoeyR2J7P/uYXbnO73aJVVvGVp3ULVgmRrfTFZrO5f/7+8zfRHwn+7tfPH6pvUj0m1h8v5Hajx3UuhZj1vMZNJVqfFP2z07o0A+aYHJNew+x37HNGPvpIkWfroYtR4kIWPOoFqp4xZ31lRKGdB8nMmAID11Lq70I3t9brtcwal4DxFWwsHpMbLAGHODkmJGYNTO4N0uOA1q+RTlb2+jctOjOjWzWIMMai9GQ5WaDQ9xrO2kC5jNw+Ojb2QsBiOQ0wOKPDM3M/9RxvrZPiCCHLLJj0OnauRLhvCZI6MCTojNVgwgBpjEVkKMzcvY6+94pdHyhZkOGlhxtPo3ElGWkeGlYNZkqsXMA3F6bCcb8ZU4mtIyYWJDR9ClXgylrY3JjbOBIKakc4a4DdrWe4LJjNlObfEzJkhBQNhJ1W8DAcKYyRvDp+NyWmZSS9oHjqyfwkwEqVEAIUbGgMFz3ID4kZEPrMrG0svhQ8JV5bmbBKcpTO/gY8auR5wNGjMAHB+6RlPE/s6aWGhaQZJGeSNs7rNXAIHQPS3DPJeO2ZV7gSWEr0HeRzhkhvHnnNLJhgbIyrHVrZwSXh4u41QwjTEBcuuWPqNutAxkdwAD55x4sAuIGNHTNeYw/TorlTz1AxFyZMyj0Q6ELCcAlr+OjT9YW/bU+i2wnhA7v0hNlYFdg/yAiQEvKcBiwlhTX6wJYjk4VWdq1ApEYo3x+GiXgXeyZGx2eupyaF7a/0YVzJXDbyQRnA2K0mHpbxBtVLg9yvK7lmrR3CFi1FW1MRgh44/tcLw5RQD27Ioue5BRDuUx9naTmMjd+xw0VTtxk7YrEaoItN9JXQo6DepF4AJoWIHT+sShJ6Ki4xDT3XmA8ZPyRpuZC909ynQvH1AFcy0d7UpLJJSfIodl4fjCke0mj8VlUStOFtGIhRT8e644bJjQzpShSXvTN9R4jNbdzXc5s1r8JhqIViSojXipji5USSd+9HHkspq22SXSEPd8WgpOdXYOXtwBD0KSzgQwTSVGD1NHzUC8HUeXzXkGZgyuRYKfJ6+ZAqqQTGc+HKWMq74Drv5bjv01imo2wtmc591r89e3iIuqfJNURKhjB1H76ZMbUk32kYj3R2FCepo0r8socpeuKsUdo8MvAljW9H2avKgUonGos0KDSljl7SEjBJ64ZWsmIOFfQClfEsUHYemEydI83kWXuAxQwSyCfofIcFYfIJSVKjsRT+jr5MGHht4cooXmnm75m4dyeNhwUrfW3sxVjvh++5S/9mN+FBcdaZwH48HBNp7qUenrAWDF2NQhizMfp6hzgYM2Q5opynYhph50BSJkwOEbJpY8sp8P53wDRYnhxgr0AUrulUWrIgkEeGNAcf0kD4KhhLVBNh58pWE3JTCEP0TTXq4nu9zFyYmEcBFE88G2GE5Me4OfPiVC5YhkQal0UeOA/Ws1E3fHnibcl6hRBGMyFX2RPSLAFTX9h/i9wd5lEJQzfbkGTneNxuSUNdaiFZJFgB3fzWtc6A3kTIK5a0na8gTJTEy2QPxjSFdEMbdyr6/6JPKNA9k/dkwrvAnCUOLYuVNBa6r/bF7BcP74A3sEQe4oT0PQhNvFkwBYx3kcG+ndD1rbVZ/yPbKlOFpFVWWQmzSpj8E2AACzfl0juXQjIAAAAASUVORK5CYII=",alt:"logo"},null)]})]),u("div",{class:"text-center mt-3 mb-7"},[u(m("router-link"),{to:"/",class:"white--text font-size-4 font-weight-bold"},{default:()=>[this.$route.matched[1].meta.name]})]),u(m("el-menu"),{"default-active":(null==(e=this.$route.matched[2])?void 0:e.meta.nochild)?this.$route.matched[2].name:null==(t=this.$route.matched[3])?void 0:t.name,router:!0},{default:()=>{var e,t;return[null==(t=null==(e=this.routerData[this.$route.matched[1].name])?void 0:e.children)?void 0:t.map((e=>{var t,l,a;if((null==(l=null==(t=this.user.auth)?void 0:t.router)?void 0:l.indexOf(e.meta.value))>-1||"ceb"!=this.$route.matched[1].name||(null==(a=this.user.type)?void 0:a.indexOf("ADMIN"))>-1)return e.children&&e.children.length>0&&!e.meta.nochild?u(m("el-submenu"),{index:e.name,key:e.name},{default:()=>e.children.map((e=>u(m("el-menu-item"),{route:e,index:e.name,key:e.name},{default:()=>[u("div",{class:"d-flex flex-row align-center el-menu-item-div"},[u("div",{class:"mr-4"},[u("div",{class:"el-menu-item-icon font-weight-bold"},[e.meta.icon])]),u("div",null,[e.meta.name])])]}))),title:()=>u("div",{class:"d-flex flex-row align-center",style:{width:"100%",height:"100%"}},[u("div",{class:"el-menu-item-div"},[u("i",{class:["iconfont mr-4 white--text",e.meta.icon]},null),f(" "),e.meta.name])])}):u(m("el-menu-item"),{route:e,index:e.name,key:e.name},{default:()=>[u("div",{class:"d-flex flex-row align-center",style:{width:"100%",height:"100%"}},[u("div",{class:"el-menu-item-div"},[u("i",{class:["iconfont mr-4 white--text",e.meta.icon]},null),f(" "),e.meta.name])])]})}))]}})]}})]}),u(m("el-container"),null,{default:()=>[u(m("el-header"),{class:[xe,"d-flex align-center"]},{default:()=>{var e;return[u("div",{class:" flex-grow-1 d-flex align-center"},[u(m("router-link"),{to:"/",class:"d-flex align-center mr-8"},{default:()=>[u("div",{class:[ve,"mr-2 "]},[u("i",{class:["user-iconfont icon-shouye1",we]},null)]),u("span",null,[f("首页")])]}),u("a",{href:"//lygddt.com/",target:"_blank",class:"d-flex align-center mr-8"},[u("div",{class:[ve,"mr-2 "]},[u("i",{class:["user-iconfont icon-qiye2",we]},null)]),u("span",null,[f("企业端")])]),u(m("v-if"),{show:(null==(e=this.user.type)?void 0:e.indexOf("ADMIN"))>-1},{default:()=>[u("a",{href:"//admin.lygddt.com/",target:"_blank",class:"d-flex align-center mr-8"},[u("div",{class:[ve,"mr-2 "]},[u("i",{class:["user-iconfont icon-zhengwuting",we]},null)]),u("span",null,[f("超级管理端")])])]})]),u(m("el-dropdown"),{"onVisible-change":e=>this.downicon=e},{dropdown:()=>u(m("el-dropdown-menu"),null,{default:()=>[u(m("el-dropdown-item"),null,{default:()=>[u("i",{class:"el-icon-lock"},null),f(" 修改密码")]}),u(m("el-dropdown-item"),{divided:!0,onClick:this.out},{default:()=>[u("i",{class:"el-icon-switch-button"},null),f(" 退出登录")]})]}),default:()=>u("div",{class:"d-flex align-center"},[u("div",{class:[ve,"mr-2 "]},[u("i",{class:["user-iconfont icon-geren",we]},null)]),u("span",{style:{cursor:"pointer"}},[this.user.phone]),u("i",{class:[ke," el-icon--right",this.downicon?"el-icon-arrow-up":"el-icon-arrow-down"]},null)])})]}}),u(m("el-main"),{class:[ye,"layout-scroll","root"==this.$route.matched[1].name?"white":null]},{default:()=>[u(m("router-view"),null,null)]})]})]})}out(){this.$axios.delete("/sso").then((e=>{this.$message.success("退出登录成功"),this.user=null,T.toLogin()}))}}h([ae()],je.prototype,"user",void 0);const Ee=I({history:M(),routes:[{path:"/",name:"home",component:je,redirect:{name:"root"},children:[{path:"",name:"root",meta:{name:"首页"},component:ne},be,Ve,Ne,De,Te,$e,{path:"setup-shop",name:"setup-shop",meta:{name:"电商信用体系"},component:te},{path:"setup-risk",name:"setup-risk",meta:{name:"风险防控体系"},component:te},{path:"setup-finance",name:"setup-finance",meta:{name:"金融服务体系"},component:te},{path:"setup-logistics",name:"setup-logistics",meta:{name:"智能物流体系"},component:te},{path:"setup-statistics",name:"setup-statistics",meta:{name:"统计监测体系"},component:te},{path:"setup-share",name:"setup-share",meta:{name:"信息共享体系"},component:te}]},{path:"/502",name:"e502",props:{is502:!0},component:o},{path:"/:pathMatch(.*)*",component:o}]});Ee.beforeEach(((e,t,l)=>{"e502"==e.name&&"true"!=e.params.is502&&Ee.back(),l()}));let Oe=U(oe).use(Ee).use(s).use(i,{baseURL:"/api"},{401:()=>{T.toLogin()},502:()=>{Ee.push({name:"e502",params:{is502:"true"}})}});Oe.mount("#app"),Oe.config.globalProperties.toUPScroll=function(e){let t=document.querySelector(e);t.scrollTop>0&&(t.scrollTop=0)};
